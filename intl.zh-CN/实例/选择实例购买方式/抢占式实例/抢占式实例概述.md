# 抢占式实例概述

抢占式实例是一种按需实例，相对于按量付费实例价格有一定的折扣，旨在为您降低部分场景下使用ECS实例的成本。

## 抢占式实例介绍

抢占式实例的特点如下表所示。

|特点|说明|
|--|--|
|出价模式|抢占式实例的市场价格会随供需变化而浮动，您需要在创建抢占式实例时指定出价模式，当指定实例规格的实时市场价格低于出价且库存充足时，就能成功创建抢占式实例。抢占式实例创建成功后，操作与按量付费实例相同，您也可以组合使用抢占式实例和其他云产品，例如云盘、EIP地址等。 |
|保护期|抢占式实例默认有1小时的保护期，支持在调用OpenAPI创建抢占式实例时设置为无保护期。-   如果抢占式实例有保护期，在保护期内即使市场价格浮动超过了出价，抢占式实例也不会被释放，您可以在该抢占式实例上正常运行业务。
-   如果抢占式实例设置为无保护期，会始终比有保护期优惠，在有保护期实例价格的基础上再优惠10%左右。

**说明：** 仅支持在调用OpenAPI创建抢占式实例时设置保护期，参数详情请参见[RunInstances](/intl.zh-CN/API参考/实例/RunInstances.md)和[CreateInstance](/intl.zh-CN/API参考/实例/CreateInstance.md)中的SpotDuration。 |
|回收机制|超过保护期后，每5分钟检测一次实例规格的实时市场价格和库存，如果某一时刻的市场价格高于出价或实例规格库存不足，抢占式实例会被释放。**说明：** 实例释放后数据无法恢复，建议您提前创建快照备份数据。具体操作，请参见[快照概述](/intl.zh-CN/快照/快照概述.md)中的相关操作部分。

您可以在售卖页查看具体实例规格的释放率，同时适用于有保护期实例和无保护期实例。释放率主要由实例规格供需关系和竞价策略决定，释放率越低表明抢占式实例被回收的可能性越小。 |

以美国（硅谷）可用区B、ecs.c5.8xlarge为例，假设：

-   当前按量付费实例原价为1.52 USD/时。
-   有1小时保护期的抢占式实例价格当前折扣力度为1折，即0.152 USD/时。

如果创建抢占式实例时设置为无保护期，则价格在1折基础上再优惠10%左右，即0.152\*0.9=0.137 USD/时。

**说明：** 按量付费实例原价和抢占式实例折扣力度可能变化，此处仅为示例。

![spot-price-example-intl](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/5664911061/p170590.png)

## 生命周期

假设抢占式实例有1小时的保护期，则生命周期示例如下图所示。

![](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/6604359951/p59675.png)

创建抢占式实例后，您可以随时主动释放实例，具体操作请参见[释放实例](/intl.zh-CN/实例/管理实例/释放实例.md)。因为市场价格变化或实例规格库存不足而自动释放抢占式实例时，抢占式实例会进入待回收状态，约5分钟后再自动释放。您可以通过实例元数据或者DescribeInstances接口返回的`OperationLocks`信息查看实例是否进入待回收状态。

虽然抢占式实例支持查看是否进入了待回收状态，您可以在等待回收的时间里保存少量数据。但仍然建议您优化应用设计，保证在抢占式实例被回收的情况下应用也可以正常工作。您可以尝试主动释放抢占式实例，检测在抢占式实例被回收的情况下应用工作是否正常。

一般情况下，系统会从出价最低的抢占式实例开始释放。如果多个抢占式实例的出价相同，则随机确定实例的释放顺序。

## 使用限制

-   是否支持抢占式实例根据您的云服务器使用情况而定。
-   抢占式实例不支持转换为包年包月实例。
-   抢占式实例不支持变更实例规格。
-   抢占式实例配额请参见[使用限制](/intl.zh-CN/产品简介/使用限制.md)。

## 应用场景

抢占式实例适用于无状态的应用场景，例如可弹性伸缩的Web站点服务、图像渲染、大数据分析和大规模并行计算等。应用程序的分布度、可扩展性和容错能力越高，越适合使用抢占式实例节省成本和提升吞吐量。

您可以在抢占式实例上部署以下业务：

-   实时分析业务
-   大数据业务
-   地理空间勘测分析业务
-   图像和媒体编码业务
-   科学计算业务
-   可弹性伸缩的业务站点、网络爬虫业务
-   测试业务

有状态应用不宜使用抢占式实例，例如数据库。因为竞价失败等原因导致抢占式实例被释放时，应用状态难以保存。

## 价格和计费

-   价格

    抢占式实例的价格是指实例规格（包括vCPU和内存）的价格，不包括系统盘、数据盘、网络带宽等资源的价格。

    -   系统盘、数据盘的计费遵循按量付费规则，详细信息请参见[按量付费](/intl.zh-CN/产品定价/计费方式/按量付费.md)。
    -   网络带宽的计费遵循按量付费实例的带宽计费规则，详细信息请参见[公网带宽计费](/intl.zh-CN/产品定价/计费项/公网带宽计费.md)。
-   市场价格

    抢占式实例的市场价格会随市场对某一种实例规格的供需变化而浮动。创建抢占式实例时，如果指定实例规格的实时市场价格低于出价且库存充足，就能成功创建抢占式实例。

    如果抢占式实例有保护期，在保护期内实例规格会按成交时的市场价格计费，超过保护期后按照实时的市场价格计费。

    您可以充分利用抢占式实例的价格浮动特性，在适当的时间购买抢占式实例，降低计算成本，并在整体成本下降的前提下，提升业务在该时间周期内的吞吐量。

-   计费方式

    抢占式实例按秒计费。成功创建实例时的市场价格为小时价，将小时价除以3600即可得到每秒的价格。

    从成功创建到释放抢占式实例的费用精确到小数点后两位。累计费用不足0.01美元的部分不收取。

-   计费时长

    抢占式实例按实际使用时长计费。实际使用时长是指从成功创建到释放抢占式实例的时长，抢占式实例释放后才停止计费。如果您只是在ECS管理控制台上或者调用StopInstance接口停止实例，实例会继续计费。如果您暂时不需要使用抢占式实例，建议创建快照备份数据和环境，然后释放实例，在需要使用抢占式实例时再重新购买。


## 常见问题

-   抢占式实例的价格折扣包括了哪些资源？

    仅实例规格的价格有折扣。云盘、网络带宽等其他资源的价格没有折扣，与按量付费实例的价格保持一致。

-   抢占式实例被释放时会有通知吗？

    有通知。因市场价格变化或供需调整需要释放抢占式实例时，实例会先进入待回收状态，约5分钟后再自动释放。

-   抢占式实例支持变更实例规格吗？

    不支持。

-   价格上，无保护期抢占式实例与有保护期抢占式实例，哪一类更优惠？

    为了保障您的利益，无保护期会始终比有保护期优惠，在有保护期价格的基础上再优惠10%左右。

-   支持切换有保护期和无保护期吗？

    不支持。抢占式实例默认有1小时的保护期，您只能在使用OpenAPI创建抢占式实例时设置保护期，创建完成后不能切换保护期设置。

-   释放率上，无保护期抢占式实例是否比有保护期抢占式实例的高？

    您可以在售卖页查看具体实例规格的释放率，同时适用于有保护期实例和无保护期实例。释放率主要由实例规格供需关系和竞价策略决定。

    ![release-rate](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/7724201061/p170286.png)


更多有关抢占式实例的问题，请参见[实例FAQ](/intl.zh-CN/实例/实例FAQ.md)。

