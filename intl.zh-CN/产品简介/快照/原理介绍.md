# 原理介绍 {#concept_zbn_tzw_ydb .concept}

阿里云提供了快照功能，通过有计划地对弹性块存储（这里简称为 **磁盘**）创建快照，您可以保留磁盘在某一个或者多个时间点的数据拷贝，从而保证您的业务可持续运行。

## 增量快照机制 {#section_yvf_5zw_ydb .section}

快照使用增量的方式，只拷贝两份快照之间有数据变化的部分，如下图所示。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/9575/5243_zh-CN.jpg)

-   图中快照1、快照2和快照3分别是一块磁盘第一份、第二份和第三份快照。文件系统对磁盘的数据进行分块检查，当创建快照时，只有发生变化的数据块才会被复制到快照中：

    1.  快照1是第一份快照，复制了该磁盘上所有数据。
    2.  快照2只复制了有变化的数据块B1和C1。数据块A和D引用了快照1中的A和D。
    3.  快照3只复制了有变化的数据块B2。数据块A和D引用了快照1中的A和D，数据块C1引用了快照2中的C1。
-   当磁盘需要恢复到快照3的状态时，**回滚磁盘** 功能会将数据块A、B2、C1和D复制到磁盘上，从而将磁盘恢复到快照3的状态。

-   如果快照2被删除，快照中的数据块B1将被删除，但是数据块C1则不会被删除（依然被引用的数据块不会被删除）。所以，当磁盘恢复到快照3的状态时，仍可以恢复数据块C1的状态。


## 创建快照时耗 {#section_cwf_5zw_ydb .section}

每块磁盘的第一份快照是全量快照，耗时较长。之后再对同一块磁盘创建快照时，都是增量快照，耗时较短。创建一份快照需要的时间取决于需要备份的数据量。

## 创建快照影响 {#section_dwf_5zw_ydb .section}

创建快照可能会轻微降低磁盘的性能，出现短暂瞬间变慢。

## 快照链 {#section_ewf_5zw_ydb .section}

快照链是一块磁盘中所有快照组成的关系链，一块磁盘对应一条快照链，所以快照链ID即磁盘 ID。一条快照链会包括以下信息：

-   快照节点：快照链中的一个节点表示磁盘的一份快照。

-   快照容量：快照链中所有快照占用的存储空间。

    **说明：** 快照服务按照快照容量来收费，您可以使用快照链确认每块磁盘的快照容量。

-   快照额度：每块磁盘最多只能创建64份快照，所以，每条快照链最多只能有64个节点，包括手动创建及自动创建的快照。

    **说明：** 一块磁盘的快照数量达到额度上限后，如果要继续创建自动快照，系统会自动删除最早的自动快照；如果要手动创建快照，您需要手动删除不需要的快照。更多信息，请参见 用户指南 的 为磁盘设置自动快照策略 和 删除快照。


